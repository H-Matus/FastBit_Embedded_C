/**
  ******************************************************************************
  * @file    main.c
  * @author  Auto-generated by STM32CubeIDE
  * @version V1.0
  * @brief   Default main function.
  ******************************************************************************
*/

#include <stdint.h>
#include <stdio.h>

#define GPIOD_RCC		0x40023830	/* AHB1ENR - clock control register for GPIOD	*/
#define GPIOD_RCC_EN	0x8
#define GPIOD_MODER 	0x40020C00	/* GPIOD_MODER - GPIO port mode register		*/
#define GPIOD_MODER_EN	0x01000000
#define GPIOD_ODR		0x40020C14	/* GPIOD_ODR - GPIO port output data register	*/

#define GPIOA_RCC		0x40023830
#define GPIOA_RCC_EN	0x1
#define GPIOA_MODER 	0x40020000	/* GPIOD_MODER - GPIO port mode register		*/
#define GPIOA_MODER_EN	0x0
#define GPIOA_IDR		0x40020010	/* GPIOD_IDR - GPIO port input data register	*/

int main(void)
{
	uint32_t volatile *clockD = (uint32_t *)GPIOD_RCC;
	uint32_t volatile *mode = (uint32_t *)GPIOD_MODER;
	uint32_t volatile *output = (uint32_t *)GPIOD_ODR;
	uint32_t volatile *input = (uint32_t *)GPIOA_IDR;
	uint32_t volatile *clockA = (uint32_t *)GPIOA_RCC;

	*clockD |= GPIOD_RCC_EN;
	*clockA |= GPIOA_RCC_EN;
	*mode |= GPIOD_MODER_EN;

	for(;;)
	{
		if(*input & 1)
		{
			*output |= (1 << 12);
		}
		else
		{
			*output &= 0;
		}
	}
}
