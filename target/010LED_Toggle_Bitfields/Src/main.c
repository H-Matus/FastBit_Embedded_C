/**
  ******************************************************************************
  * @file    main.c
  * @author  Auto-generated by STM32CubeIDE
  * @version V1.0
  * @brief   Default main function.
  ******************************************************************************
*/

#include <stdint.h>
#include <stdio.h>
#include "main.h"

#define GPIO_RCC		0x40023830	/* AHB1ENR - clock control register for GPIOD	*/
#define GPIOA_MODER 	0x40020000	/* GPIOD_MODER - GPIO port mode register		*/
#define GPIOD_MODER 	0x40020C00	/* GPIOD_MODER - GPIO port mode register		*/
#define GPIOA_IDR		0x40020010	/* GPIOD_IDR - GPIO port input data register	*/
#define GPIOD_ODR		0x40020C14	/* GPIOD_ODR - GPIO port output data register	*/

int main(void)
{
	RCC_AHB1ENR_t volatile *pClkCtrlReg = (RCC_AHB1ENR_t*) GPIO_RCC;
	GPIOx_MODE_t volatile *pGpioDModeReg = (GPIOx_MODE_t*) GPIOA_MODER;
	GPIOx_MODE_t volatile *pGpioAModeReg = (GPIOx_MODE_t*) GPIOD_MODER;
	GPIOx_IDR_t	volatile *pGpioAInputReg = (GPIOx_IDR_t*) GPIOA_IDR;
	GPIOx_ODR_t volatile *pGpioDOutputReg = (GPIOx_ODR_t*) GPIOD_ODR;

	pClkCtrlReg->gpioa_en = 1;
	pClkCtrlReg->gpiod_en = 1;

	pGpioAModeReg->pin_0 = 0;
	pGpioDModeReg->pin_12 = 1;

	for(;;)
	{
		if(1 == pGpioAInputReg->pin_0)
		{
			pGpioDOutputReg->pin_12 = 1;
		}
		else
		{
			pGpioDOutputReg->pin_12 = 0;
		}
	}
}
